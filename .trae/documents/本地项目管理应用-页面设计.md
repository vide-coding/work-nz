# 页面设计（Desktop-first）

## 全局样式（Global Styles）

- Layout: 桌面优先，内容最大宽度 1200–1440；主要采用 CSS Grid（双栏/三栏）+ Flex（行内对齐）。

- 主题系统：浅色 / 深色 / 跟随系统 / 自定义；使用 CSS Variables（设计令牌）驱动颜色、阴影与边框；主题设置保存到当前工作区。

- 色彩：默认强调色 `#4F46E5`；项目可配置 `themeColor` 用于列表徽标、详情标题强调与预览卡片。

- 字体：系统字体栈；标题 20/16，正文 14，辅助 12；行高 1.4–1.6。

- 组件库：Reka UI（Dialog/Dropdown/Tabs/Toast/Tooltip/Tree 等）。

- 交互状态：按钮 hover 提亮、active 压暗、disabled 降低透明度；输入框 focus 2px 强调色描边。

- 响应式：<= 960px 侧栏折叠为抽屉；<= 600px 列表单列。

---

## 页面 1：工作区选择页

### Meta Information

- title: 工作区选择

- description: 选择工作区并配置主题与默认 IDE

- og:title: 工作区选择

### Page Structure

- 单页居中卡片布局：外层 1 列居中；卡片内分区为“工作区”“默认 IDE”“外观”“操作”。

### Sections & Components

1. 顶部标题区
   - 应用名 + 说明："请选择工作区文件夹，应用数据与项目均存于此处"。

2. 最近工作区列表（Card List）
   - 列表项：工作区路径、最近打开时间、按钮："打开"。

   - 空态：提示“尚未选择过工作区”。

3. 选择/创建工作区
   - 主按钮："选择文件夹"（触发系统目录选择）。

   - 次按钮："创建新工作区"（选择空目录或新建目录）。

4. 校验与初始化提示（Inline Alert）
   - 校验通过：展示将创建/使用的内部目录（例如 `.app/`）与数据库文件 `app.db`。

   - 校验失败：展示原因（无权限/目录不可写/路径不存在）。

5. 工作区默认 IDE（IDE Settings Panel）
   - 选择器（Dropdown）："VS Code" / "JetBrains" / "Visual Studio" / "自定义"。

   - IDE 入口配置：
     - exePath（文件选择器 + 文本框，可粘贴路径）。

     - args（可选，Tag Input）。

   - 辅助说明："以后在项目中点击‘用 IDE 打开’将默认使用此设置"。

   - 校验：exePath 不存在或不可执行时提示；允许保存但在打开时二次提示（产品策略可选）。

6. 外观设置（Theme Switch）
   - 下拉：浅色 / 深色 / 跟随系统 / 自定义。

   - 提示：设置保存到当前工作区并自动生效。

7. 底部操作
   - 主按钮："进入"（仅校验通过可点）。

   - 次按钮："退出应用"。

---

## 页面 2：项目总览页

### Meta Information

- title: 项目总览

- description: 管理项目、Git 同步、快速用 IDE 打开

- og:title: 项目总览

### Page Structure

- 顶部应用栏 + 主内容双栏：左侧列表（1fr），右侧预览（360px）。<= 960px 右侧变抽屉。

### Sections & Components

1. 顶部应用栏（Top Bar）
   - 左侧：当前工作区路径（可复制）+ "切换工作区"。

   - 右侧：主题切换下拉 + "从 Git 克隆"按钮 + "新建空项目"按钮。

2. 搜索与排序（Toolbar）
   - 搜索框：按项目名过滤。

   - 排序下拉：更新时间/名称。

3. 项目列表（List）
   - 列表项信息：项目名、描述摘要、更新时间、主题色徽标、Git 绑定标记（如有远端 URL）。

   - Git 状态徽标（仅 Git 项目显示，位于项目名右侧或次行）：
     - 脏状态：`未提交变更` Badge（例如“Dirty”/“未提交”），hover Tooltip 展示“检测到未提交变更”。

     - 远端更新：`可更新` Badge（behind>0 时显示），Tooltip 展示“落后远端 N 个提交”。

     - 离线/失败：`离线`/`检查失败` 图标或 Badge，Tooltip 展示最后错误原因与“上次检查时间”。

     - 上次检查时间：以“x 分钟前”形式展示在徽标旁（可更小字号）。

   - 触发策略（UI 侧表现）：
     - 列表加载完成后先读取本地缓存状态（如有），随后触发一次后台检查刷新。

     - 前台页面停留时：脏状态主要依赖文件事件，远端更新采用轮询；轮询频率默认建议 5 分钟一次（可在后续产品迭代提供设置）。

     - 应用离线时：继续刷新脏状态，但远端更新检查退避重试并显示离线提示。

   - 快捷操作：
     - "打开"（进入工作台）

     - "Pull"（仅 Git 项目显示）

     - "用 IDE 打开"（使用工作区默认 IDE；右键/更多菜单里提供“选择 IDE 打开”）

     - "删除"（二次确认 Dialog）

4. 右侧预览（Preview Panel）
   - 基础信息：完整描述、项目路径、更新时间。

   - Git 信息：远端 URL、分支、上次同步时间；提供 "Pull" 按钮。

   - 资源目录概览：展示已绑定的目录类型（文档/UI 设计/项目规划/自定义）与对应目录路径；未绑定时显示“去工作台创建/绑定”。

   - 打开方式：主按钮 "进入工作台"；次按钮 "用 IDE 打开"。

   - 视觉预览：用项目 `themeColor` 渲染一张小预览卡片。

5. 从 Git 克隆弹窗（Dialog）
   - 字段：仓库 URL（必填）、分支（可选）、目标目录名（必填）、项目名/描述（可选）。

   - 行为：提交后执行 clone；成功后自动出现在列表并可直接打开/用 IDE 打开。

6. Pull 状态反馈
   - Toast：成功/失败（含原因摘要）。

   - Loading：pull/cloning 时在对应列表项显示进度状态（Spinner + 文案）。

---

## 页面 3：项目工作台页

### Meta Information

- title: 项目工作台

- description: 项目详情、Git 同步与 IDE 打开

- og:title: 项目工作台

### Page Structure

- 顶部栏 + 左侧“资源目录/文件树” + 右侧内容区。

- Grid：`320px 1fr`（左侧更宽以容纳目录类型与树）；<= 960px 左侧折叠为抽屉。

### Sections & Components

1. 顶部栏
   - 面包屑：项目总览 / 当前项目。

   - 右侧："返回总览"、"切换工作区"、"用 IDE 打开"。

2. 左侧：侧边栏导航（Sidebar Navigation）
   - 垂直菜单列表（List Group）：
     - "代码"（Icon: Code）：点击进入代码仓库管理视图。
     - "文档"（Icon: Article）：点击进入文档目录文件浏览视图。
     - "UI 设计"（Icon: Image）：点击进入设计目录文件浏览视图。
     - "项目规划"（Icon: Map）：点击进入规划目录文件浏览视图。
     - "自定义..."（Icon: Folder）：动态列出自定义类型。

3. 右侧：主内容区（Main Content Area）
   - **视图 A：代码仓库管理（当左侧选中“代码”时）**
     - 顶部操作条：
       - 标题："代码仓库"
       - 按钮："克隆新仓库"（弹窗输入 URL）、"新建本地仓库"、"添加已有仓库"。

     - 仓库列表（Card List / Table）：
       - 列出当前项目关联的所有 Git 仓库。
       - 每个卡片展示：
         - 仓库名（目录名）、路径（相对项目根目录）。
         - Git 状态：分支名、脏状态徽标、落后/超前徽标。
         - 操作按钮："Pull"、"用 IDE 打开"、"移除"。

     - 空态：显示"暂无代码仓库"，引导点击"克隆"或"创建"。

   - **视图 B：资源目录浏览（当左侧选中“文档/设计/规划”时）**
     - 目录绑定/创建区（顶部）：
       - 未绑定时：显示大按钮"创建/选择目录"。
       - 已绑定时：显示当前绑定路径与"更改"按钮。
       - 工具栏：面包屑导航、"新建文件夹"、"上传"、**"视图切换"（Grid/List）**。

     - 文件树与预览（Split View）：
       - 左侧文件区：
         - **网格视图**：大图标展示文件/文件夹，hover 显示基础信息。
         - **列视图**：表格展示（名称、修改时间、大小），支持排序。
       - 右侧预览区（可折叠）：
         - 顶部信息条：文件名、大小、修改时间。
         - 内容区：
           - 图片：居中缩放预览。
           - Markdown/文本：只读文本预览。
           - 其他：显示"不支持预览"提示与文件图标。

4. 状态反馈
   - Toast：保存成功/失败；Git 同步成功/失败；IDE 打开失败（路径无效/启动失败）；目录创建/绑定成功或失败。

   - Loading：加载项目详情、目录绑定信息与文件树时显示。
